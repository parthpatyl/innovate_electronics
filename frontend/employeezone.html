<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Employee Zone</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/footer.css">
  <link rel="stylesheet" href="css/header.css">
  <link rel="stylesheet" href="css/chatbot.css">
  <link rel="stylesheet" href="css/employee.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>

<body>
  <div id="header-section"></div>
  <div id="overlay"></div>
  <main>
    <!-- Login Container -->
    <div id="login-container" class="login-container">
      <h2>Employee Login</h2>
      <form id="login-form">
        <div class="input-group">
          <input type="text" id="username" placeholder="Username" required>
        </div>
        <div class="input-group">
          <input type="password" id="password" placeholder="Password" required>
        </div>
        <button type="submit" class="login-btn">Login</button>
      </form>
    </div>

    <!-- CMS Container (hidden initially) -->
    <div id="cms-container" class="cms-container" style="display: none;">
      <!-- Sidebar Navigation -->
      <aside class="sidebar">
        <div class="sidebar-header">
          <a id="logout-btn" class="btn btn-secondary" type="button" href="./landingpage.html">Logout</a>
          <h2>Innovate Electronics</h2>
          <p>Content Management</p>
        </div>
        
        <nav class="sidebar-nav">
          <ul>
            <li>
              <a href="#" class="nav-link active" data-section="dashboard">
                <span>Dashboard</span>
              </a>
            </li>
            <li>
              <a href="#" class="nav-link" data-section="products">
                <span>Products</span>
              </a>
            </li>
            <li>
              <a href="#" class="nav-link" data-section="events">
                <span>Events</span>
              </a>
            </li>
            <li>
              <a href="#" class="nav-link" data-section="blogs">
                <span>Blogs</span>
              </a>
            </li>
            <li>
              <a href="#" class="nav-link" data-section="newsletters">
                <span>Newsletters</span>
              </a>
            </li>
          </ul>
        </nav>
      </aside>

      <!-- Main Content Area -->
      <div class="main-content">
        <!-- Page Header -->
        <div class="page-header">
          <div class="page-info">
            <h1 id="page-title">Dashboard</h1>
            <p id="page-description">Welcome to your content management system</p>
          </div>
          <button class="btn btn-primary" id="create-btn" style="display: none;">
            Create New
          </button>
        </div>

        <!-- Dashboard Section -->
        <section id="dashboard" class="content-section active">
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-number" id="products-count">0</div>
              <div class="stat-label">Products</div>
            </div>
            <div class="stat-card">
              <div class="stat-number" id="events-count">0</div>
              <div class="stat-label">Events</div>
            </div>
            <div class="stat-card">
              <div class="stat-number" id="blogs-count">0</div>
              <div class="stat-label">Blogs</div>
            </div>
            <div class="stat-card">
              <div class="stat-number" id="newsletters-count">0</div>
              <div class="stat-label">Newsletters</div>
            </div>
          </div>
        </section>

        <!-- Products Section -->
        <section id="products" class="content-section">
          <div class="content-actions">
            <div class="search-box">
              <input type="text" placeholder="Search products..." id="products-search">
            </div>
            <div class="filter-dropdown">
              <select id="products-status-filter">
                <option value="">All Status</option>
                <option value="draft">Draft</option>
                <option value="published">Published</option>
                <option value="archived">Archived</option>
              </select>
            </div>
          </div>
          
          <div class="content-list" id="products-list">
            <div class="loading">Loading products...</div>
          </div>
        </section>

        <!-- Events Section -->
        <section id="events" class="content-section">
          <div class="content-actions">
            <div class="search-box">
              <input type="text" placeholder="Search events..." id="events-search">
            </div>
            <div class="filter-dropdown">
              <select id="events-status-filter">
                <option value="">All Status</option>
                <option value="draft">Draft</option>
                <option value="published">Published</option>
                <option value="archived">Archived</option>
              </select>
            </div>
          </div>
          
          <div class="content-list" id="events-list">
            <div class="loading">Loading events...</div>
          </div>
        </section>

        <!-- Blogs Section -->
        <section id="blogs" class="content-section">
          <div class="content-actions">
            <div class="search-box">
              <input type="text" placeholder="Search blogs..." id="blogs-search">
            </div>
            <div class="filter-dropdown">
              <select id="blogs-status-filter">
                <option value="">All Status</option>
                <option value="draft">Draft</option>
                <option value="published">Published</option>
                <option value="archived">Archived</option>
              </select>
            </div>
          </div>
          
          <div class="content-list" id="blogs-list">
            <div class="loading">Loading blogs...</div>
          </div>
        </section>

        <!-- Newsletters Section -->
        <section id="newsletters" class="content-section">
          <div class="content-actions">
            <div class="search-box">
              <input type="text" placeholder="Search newsletters..." id="newsletters-search">
            </div>
            <div class="filter-dropdown">
              <select id="newsletters-status-filter">
                <option value="">All Status</option>
                <option value="draft">Draft</option>
                <option value="published">Published</option>
                <option value="archived">Archived</option>
              </select>
            </div>
          </div>
          
          <div class="content-list" id="newsletters-list">
            <div class="loading">Loading newsletters...</div>
          </div>
        </section>
      </div>
    </div>

    <!-- Modal Overlay -->
    <div id="modal-overlay" class="modal-overlay">
      <div class="modal">
        <div class="modal-header">
          <h3 id="modal-title">Create New Content</h3>
          <button class="modal-close" id="modal-close">
          </button>
        </div>
        <div class="modal-body">
          <form id="content-form">
            <!-- Form fields will be dynamically generated -->
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" id="modal-cancel">Cancel</button>
          <button type="submit" class="btn btn-primary" id="modal-save">Save</button>
        </div>
      </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="delete-modal" class="modal-overlay">
      <div class="modal delete-modal">
        <div class="modal-header">
          <h3>Confirm Delete</h3>
          <button class="modal-close" id="delete-modal-close">
          </button>
        </div>
        <div class="modal-body">
          <p>Are you sure you want to delete this content? This action cannot be undone.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" id="delete-cancel">Cancel</button>
          <button type="button" class="btn btn-danger" id="delete-confirm">Delete</button>
        </div>
      </div>
    </div>
  </main>

  <div id="footer-section"></div>

  <script>
    // Helper to initialize CMS view
    function initializeCMSIfPossible() {
      document.getElementById('login-container').style.display = 'none';
      document.getElementById('cms-container').style.display = 'flex';
      if (typeof CMS !== 'undefined') {
        if (!window.cms) {
          window.cms = new CMS();
        }
      }
    }

    // Check session on load
    (function () {
      try {
        if (sessionStorage.getItem('cmsLoggedIn') === 'true') {
          initializeCMSIfPossible();
        }
      } catch (e) {
        // ignore storage access errors
      }
    })();

    // Login functionality
    document.getElementById('login-form').addEventListener('submit', function (e) {
      e.preventDefault();
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;

      // Simple credentials check
      if (username === 'admin' && password === 'admin') {
        // Persist session for the life of the tab/window
        try {
          sessionStorage.setItem('cmsLoggedIn', 'true');
        } catch (e) {
          // ignore storage access errors
        }

        // Hide login form and show CMS
        initializeCMSIfPossible();
      } else {
        alert('Incorrect username or password. Please try again.');
      }
    });

    // Logout functionality
    (function () {
      const logoutBtn = document.getElementById('logout-btn');
      if (logoutBtn) {
        logoutBtn.addEventListener('click', function () {
          try {
            sessionStorage.removeItem('cmsLoggedIn');
          } catch (e) {}
          // Reload to reset UI cleanly
          location.reload();
        });
      }
    })();
  </script>

  <!-- CMS Scripts -->
  <script src="js/config.js"></script>
  <script src="js/script.js"></script>
</body>

</html>